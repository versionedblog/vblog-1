<!--
  ~ Copyright (c) 2014. Lorem ipsum dolor sit amet, consectetur adipiscing elit.
  ~ Morbi non lorem porttitor neque feugiat blandit. Ut vitae ipsum eget quam lacinia accumsan.
  ~ Etiam sed turpis ac ipsum condimentum fringilla. Maecenas magna.
  ~ Proin dapibus sapien vel ante. Aliquam erat volutpat. Pellentesque sagittis ligula eget metus.
  ~ Vestibulum commodo. Ut rhoncus gravida arcu.
  -->

<!DOCTYPE html>
<html>
<head>
    <script src="lib/jquery.min.js"></script>
    <script src="lib/v-common.js"></script>
    <script src="lib/v-dateformat.js"></script>
    <script src="lib/marked.js"></script>
    <link rel="stylesheet" type="text/css" href="css/v-common.css">
    <link rel="stylesheet" type="text/css" href="css/v-editmessage.css">
    <script>
        $(document).ready(function(){
            //Second call with this:
            // Get object of URL parameters
            var allVars = $.getUrlVars();

            // Getting URL var by its nam
            var messageId = $.getUrlVar('id');
            //var docId = $.url;
            //alert("DocId=" + docId);
            $.get("/rest/json/messagelist/all/user/1/message/" + messageId,function(data,status){

                if(data.previousMessageId == null) {
                    $('#prevMessageLink').hide();
                } else {
                    var prevMessageLink = $("<a></a>").attr("href", "message.html?id="+data.previousMessageId).text("Prev Message");
                    $('#prevMessageLink').show();
                    $('#prevMessageLink').html(prevMessageLink);
                }
                if(data.nextMessageId == null) {
                    $('#nextMessageLink').hide();
                } else {
                    var nextMessageLink = $("<a></a>").attr("href", "message.html?id="+data.nextMessageId).text("Next Message");
                    $('#nextMessageLink').show();
                    $('#nextMessageLink').html(nextMessageLink);
                }

                if(data.previousVersionId == null) {
                    $('#prevVersionLink').hide();
                } else {
                    var prevVersionLink = $("<a></a>").attr("href", "message.html?id="+data.previousVersionId).text("Prev Version");
                    $('#prevVersionLink').show();
                    $('#prevVersionLink').html(prevVersionLink);
                }
                if(data.nextVersionId == null) {
                    $('#nextVersionLink').hide();
                } else {
                    var nextVersionLink = $("<a></a>").attr("href", "message.html?id="+data.nextVersionId).text("Next Version");
                    $('#nextVersionLink').show();
                    $('#nextVersionLink').html(nextVersionLink);
                }

                //var title = $( "#title" ).val();
                //var author = $( "#author" ).val();
                //var content = $( "#text-input" ).val();
                //"####" + data.vmessage.title + "\n" + "#### *By:*" + data.vmessage.author + ", " +" *At:*" + new Date(data.vmessage.created) + "\n" +

                $("#date").html(new Date(data.vmessage.created));
                $("#title").html(data.vmessage.title);
                $("#author").html(data.vmessage.author);
                $("#message").html(marked(data.vmessage.content));

            });

});




    </script>
</head>
<body>

<div class="content">
    <div class="header">
        <h1>EVOTA</h1>
        <h3><i>Evolution in Thinking Application</i></h3>
    </div>

    <div id="thetable" class="messageholder">

            <div class="fl"><h1><span id="title">Title</span></h1></div>
            <div id="empty" class="fr"></div>
            <div class="breaker"></div>

            <div id="date" class="fl date">Date</div>
            <div id="author" class="fr author">Author</div>
            <div class="breaker"></div>

            <div id="prevMessageLink" class="fl">Prev Message Link</div>
            <div id="nextMessageLink" class="fr">Next Message Link</div>
            <div class="breaker"></div>

            <div id="prevVersionLink" class="fl">Prev Version Link</div>
            <div id="nextVersionLink" class="fr">Next Version Link</div>
            <div class="breaker"></div>

            <div id="message" colspan="2"> Content will be here</div>

    </div>

    <div class="navright">
        xx<br>
        yy<br>
        zz<br>
    </div>

    <div class="breaker">
    </div>

    <div class="footer">
        Copyright &copy; haha
    </div>

</div>

</body>
</html>


