<!--
  ~ Copyright (c) 2014. Lorem ipsum dolor sit amet, consectetur adipiscing elit.
  ~ Morbi non lorem porttitor neque feugiat blandit. Ut vitae ipsum eget quam lacinia accumsan.
  ~ Etiam sed turpis ac ipsum condimentum fringilla. Maecenas magna.
  ~ Proin dapibus sapien vel ante. Aliquam erat volutpat. Pellentesque sagittis ligula eget metus.
  ~ Vestibulum commodo. Ut rhoncus gravida arcu.
  -->

<!DOCTYPE html>
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script>
        $.extend({
          getUrlVars: function(){
            var vars = [], hash;
            var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
            for(var i = 0; i < hashes.length; i++)
            {
              hash = hashes[i].split('=');
              vars.push(hash[0]);
              vars[hash[0]] = hash[1];
            }
            return vars;
          },
          getUrlVar: function(name){
            return $.getUrlVars()[name];
          }
        });
        $(document).ready(function(){
            //Second call with this:
            // Get object of URL parameters
            var allVars = $.getUrlVars();

            // Getting URL var by its nam
            var messageId = $.getUrlVar('id');
            //var docId = $.url;
            //alert("DocId=" + docId);
            $.get("/rest/json/messagelist/all/user/1/message/" + messageId,function(data,status){
                //alert("Data: " + data.vmessage.title + "\nStatus: " + status);
                //$('#thetable tr').not(':first').not(':last').remove();

                //$("img").attr("width","500");
                var prevMessageLink = $("<a></a>").attr("href", "message.html?id="+data.previousMessageId).text("Prev Message");
                var nextMessageLink = $("<a></a>").attr("href", "message.html?id="+data.nextMessageId).text("Next Message");
                $('#prevMessageLink').html(prevMessageLink);
                $('#nextMessageLink').html(nextMessageLink);
                $('#title').html(data.vmessage.title);
                $('#content').html(data.vmessage.content);

            });

});




    </script>
</head>
<body>

<table id="thetable">
    <tr>
        <th id="prevMessageLink">PrevLink</th>
        <th id="nextMessageLink">NextKink</th>
    </tr>
    <tr>
        <td id="title" colspan="2">title will be here</td>

    </tr>
    <tr>
        <td id="content" colspan="2"> Content will be here</td>
    </tr>
</table>

<div id="xyxy">
</div>

</body>
</html>


<html>

<head>


</head>

<body>

</body>
</html>

